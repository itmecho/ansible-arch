---
- name: Install rofi
  pacman:
    name: rofi
    state: present

- name: Userspace tasks
  become: true
  become_user: "{{ user.name }}"
  block:
    - name: Create config directory
      file:
        path: "{{ user.home }}/.config/rofi"
        state: directory

    - name: Configure rofi
      template:
        src: config.rasi
        dest: "{{ user.home }}/.config/rofi/config.rasi"

    - name: Configure themes
      copy:
        src: "{{ item }}"
        dest: "{{ user.home }}/.config/rofi/{{ item }}"
      loop:
        - dracula.rasi
        - gruvbox-common.rasi
        - gruvbox-dark.rasi
        - nord.rasi

    - name: Add rofi scripts
      copy:
        src: "{{ item }}"
        dest: "{{ user.home }}/.config/rofi/{{ item }}"
        mode: 0755
      loop:
        - powermenu.sh
